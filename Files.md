# TasAnchoré¡¹ç›® - æ–‡ä»¶åŠŸèƒ½è¯¦ç»†è¯´æ˜

**æ–‡æ¡£ç›®çš„**: è¯¦ç»†è§£é‡Šæ¯ä¸ªæ–‡ä»¶çš„åŠŸèƒ½ã€è¾“å…¥è¾“å‡ºã€æ ¸å¿ƒç®—æ³•å’Œä½¿ç”¨æ–¹æ³•  
**æœ€åæ›´æ–°**: 2025-11-22

---

## ğŸ“ æ–‡ä»¶ç»“æ„æ€»è§ˆ

```
TasAnchor_Modeling/
â”œâ”€â”€ code/                          # æ ¸å¿ƒPythonè„šæœ¬
â”‚   â”œâ”€â”€ 01_data_extraction.py      # æ•°æ®æå–ä¸é¢„å¤„ç†
â”‚   â”œâ”€â”€ 02_module_3.1.py           # æ„Ÿåº”æ¨¡å—å»ºæ¨¡
â”‚   â”œâ”€â”€ 03_module_3.2.py           # å¸é™„æ¨¡å—å»ºæ¨¡
â”‚   â”œâ”€â”€ 04_module_3.3_3.4.py       # ç»¼åˆåˆ†æä¸éªŒè¯
â”‚   â””â”€â”€ utils.py                   # é€šç”¨å·¥å…·å‡½æ•°åº“
â”‚
â”œâ”€â”€ data/                          # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ raw/                       # åŸå§‹å®éªŒæ•°æ®ï¼ˆCSVï¼‰
â”‚   â””â”€â”€ processed/                 # å¤„ç†åçš„æ•°æ®
â”‚
â”œâ”€â”€ figures/                       # ç”Ÿæˆçš„å›¾è¡¨ï¼ˆPNGï¼‰
â”œâ”€â”€ results/                       # å»ºæ¨¡ç»“æœï¼ˆCSV + TXTï¼‰
â”‚
â”œâ”€â”€ notebooks/                     # Jupyter Notebook
â”‚   â”œâ”€â”€ 01_Data_Exploration.ipynb
â”‚   â”œâ”€â”€ 02_Primary_Model_Fitting.ipynb
â”‚   â”œâ”€â”€ 03_Secondary_Model.ipynb
â”‚   â””â”€â”€ 04_Sensitivity_Analysis.ipynb
â”‚
â”œâ”€â”€ README.md                      # é¡¹ç›®ç®€ä»‹
â”œâ”€â”€ WORKFLOW.md                    # å·¥ä½œæµç¨‹æŒ‡å—
â”œâ”€â”€ FILES.md                       # æœ¬æ–‡æ¡£
â””â”€â”€ requirements.txt               # ä¾èµ–åŒ…åˆ—è¡¨
```

---

## ğŸ”§ æ ¸å¿ƒPythonè„šæœ¬

### 1. `code/utils.py` - é€šç”¨å·¥å…·å‡½æ•°åº“

**æ–‡ä»¶ç±»å‹**: å·¥å…·æ¨¡å—  
**è¡Œæ•°**: ~400è¡Œ  
**ä¾èµ–**: numpy, pandas, matplotlib, scipy, sklearn

#### åŠŸèƒ½æ¦‚è¿°

è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„**åŸºç¡€è®¾æ–½**ï¼Œæä¾›æ‰€æœ‰å»ºæ¨¡è„šæœ¬å…±ç”¨çš„å‡½æ•°ã€‚ç›¸å½“äºä¸€ä¸ªå·¥å…·ç®±ï¼Œå…¶ä»–è„šæœ¬é€šè¿‡ `from utils import *` è°ƒç”¨ã€‚

#### åŒ…å«çš„å‡½æ•°åˆ†ç±»

##### A. æ•°æ®åŠ è½½ä¸ä¿å­˜

**`load_data(filename, folder='data/raw')`**
- **ä½œç”¨**: åŠ è½½CSVæ•°æ®æ–‡ä»¶
- **è¾“å…¥**: 
  - `filename`: æ–‡ä»¶åï¼ˆå¦‚ 'module_3.1_growth_curves.csv'ï¼‰
  - `folder`: æ•°æ®æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆé»˜è®¤ 'data/raw'ï¼‰
- **è¾“å‡º**: pandas DataFrame
- **ç‰¹æ€§**: è‡ªåŠ¨æ·»åŠ .csvåç¼€ï¼Œè¾“å‡ºåŠ è½½ä¿¡æ¯
- **ç¤ºä¾‹**:
  ```python
  df = load_data('module_3.1_growth_curves.csv')
  # âœ“ å·²åŠ è½½æ•°æ®: data/raw/module_3.1_growth_curves.csv (11 è¡Œ, 6 åˆ—)
  ```

**`save_results(data, filename, folder='results')`**
- **ä½œç”¨**: ä¿å­˜ç»“æœæ•°æ®åˆ°CSV
- **è¾“å…¥**: 
  - `data`: pandas DataFrameæˆ–å­—å…¸
  - `filename`: è¾“å‡ºæ–‡ä»¶å
  - `folder`: è¾“å‡ºæ–‡ä»¶å¤¹ï¼ˆé»˜è®¤ 'results'ï¼‰
- **è¾“å‡º**: æ— ï¼ˆç›´æ¥ä¿å­˜æ–‡ä»¶ï¼‰
- **ç‰¹æ€§**: è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œè‡ªåŠ¨å°†å­—å…¸è½¬DataFrame
- **ç¤ºä¾‹**:
  ```python
  params = {'A': 1.5, 'mu_max': 0.4}
  save_results(params, 'gompertz_params.csv')
  ```

##### B. ç»Ÿè®¡åˆ†æ

**`calculate_statistics(data)`**
- **ä½œç”¨**: è®¡ç®—æè¿°æ€§ç»Ÿè®¡é‡
- **è¾“å…¥**: array-likeæ•°æ®
- **è¾“å‡º**: å­—å…¸ï¼ŒåŒ…å«mean, std, min, max, median, cv_%
- **ç”¨é€”**: å¿«é€Ÿäº†è§£æ•°æ®åˆ†å¸ƒç‰¹å¾
- **ç¤ºä¾‹**:
  ```python
  data = [1.2, 1.5, 1.3, 1.6, 1.4]
  stats = calculate_statistics(data)
  # {'mean': 1.4, 'std': 0.158, 'cv_%': 11.3, ...}
  ```

**`calculate_model_metrics(y_true, y_pred, model_name='Model')`**
- **ä½œç”¨**: è®¡ç®—æ¨¡å‹è¯„ä¼°æŒ‡æ ‡
- **è¾“å…¥**: 
  - `y_true`: çœŸå®å€¼æ•°ç»„
  - `y_pred`: æ¨¡å‹é¢„æµ‹å€¼æ•°ç»„
  - `model_name`: æ¨¡å‹åç§°ï¼ˆç”¨äºæ ‡æ³¨ï¼‰
- **è¾“å‡º**: å­—å…¸ï¼ŒåŒ…å«RÂ², RMSE, MAE, MAPE
- **æ ¸å¿ƒç®—æ³•**:
  - RÂ² = 1 - SS_res / SS_totï¼ˆå†³å®šç³»æ•°ï¼‰
  - RMSE = âˆš(Î£(y_true - y_pred)Â² / n)ï¼ˆå‡æ–¹æ ¹è¯¯å·®ï¼‰
  - MAE = Î£|y_true - y_pred| / nï¼ˆå¹³å‡ç»å¯¹è¯¯å·®ï¼‰
  - MAPE = Î£|y_true - y_pred| / y_true / n Ã— 100%ï¼ˆå¹³å‡ç™¾åˆ†æ¯”è¯¯å·®ï¼‰
- **ç”¨é€”**: è¯„ä¼°æ¨¡å‹æ‹Ÿåˆä¼˜åº¦
- **ç¤ºä¾‹**:
  ```python
  y_true = [1, 2, 3, 4, 5]
  y_pred = [1.1, 1.9, 3.2, 3.8, 5.1]
  metrics = calculate_model_metrics(y_true, y_pred, 'Gompertz')
  # {'model': 'Gompertz', 'R2': 0.989, 'RMSE': 0.158, ...}
  ```

**`perform_ttest(group1, group2, alpha=0.05)`**
- **ä½œç”¨**: æ‰§è¡Œç‹¬ç«‹æ ·æœ¬tæ£€éªŒ
- **è¾“å…¥**: ä¸¤ç»„æ•°æ®å’Œæ˜¾è‘—æ€§æ°´å¹³
- **è¾“å‡º**: å­—å…¸ï¼ŒåŒ…å«tç»Ÿè®¡é‡, på€¼, æ˜¯å¦æ˜¾è‘—
- **ç®—æ³•**: scipy.stats.ttest_indï¼ˆWelch's t-testï¼‰
- **ç”¨é€”**: æ¯”è¾ƒä¸¤ç»„æ•°æ®æ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚
- **è§£è¯»**:
  - p < 0.05: æœ‰æ˜¾è‘—å·®å¼‚
  - p >= 0.05: æ— æ˜¾è‘—å·®å¼‚
- **ç¤ºä¾‹**:
  ```python
  control = [15.2, 12.8, 18.1]
  experimental = [42.8, 39.5, 46.2]
  result = perform_ttest(control, experimental)
  # {'t_statistic': -10.73, 'p_value': 0.0004, 'significant': True}
  ```

##### C. ç»˜å›¾å·¥å…·

**`set_plot_style(style='seaborn')`**
- **ä½œç”¨**: è®¾ç½®Matplotlibç»˜å›¾æ ·å¼
- **è¾“å…¥**: æ ·å¼åç§°ï¼ˆ'seaborn', 'scientific', 'default'ï¼‰
- **æ•ˆæœ**: 
  - 'seaborn': ç¾è§‚çš„ç½‘æ ¼èƒŒæ™¯
  - 'scientific': å­¦æœ¯è®ºæ–‡é£æ ¼ï¼ˆè¡¬çº¿å­—ä½“ï¼Œç²—åæ ‡è½´ï¼‰
  - 'default': Matplotlibé»˜è®¤æ ·å¼
- **ç¤ºä¾‹**:
  ```python
  set_plot_style('scientific')  # é€‚åˆå‘è¡¨è®ºæ–‡
  ```

**`save_figure(fig, filename, folder='figures', dpi=300)`**
- **ä½œç”¨**: ä¿å­˜å›¾è¡¨åˆ°æ–‡ä»¶
- **è¾“å…¥**: 
  - `fig`: matplotlib figureå¯¹è±¡
  - `filename`: è¾“å‡ºæ–‡ä»¶å
  - `folder`: è¾“å‡ºæ–‡ä»¶å¤¹
  - `dpi`: åˆ†è¾¨ç‡ï¼ˆé»˜è®¤300ï¼Œé€‚åˆå‡ºç‰ˆï¼‰
- **ç‰¹æ€§**: 
  - è‡ªåŠ¨æ·»åŠ .pngåç¼€
  - ç™½è‰²èƒŒæ™¯ï¼Œç´§å‡‘å¸ƒå±€
  - é«˜åˆ†è¾¨ç‡
- **ç¤ºä¾‹**:
  ```python
  fig, ax = plt.subplots()
  ax.plot([1,2,3], [1,4,9])
  save_figure(fig, '01_test_plot.png')
  ```

**`plot_residuals(y_true, y_pred, title='Residual Analysis')`**
- **ä½œç”¨**: ç»˜åˆ¶æ®‹å·®åˆ†æå›¾
- **è¾“å…¥**: çœŸå®å€¼ã€é¢„æµ‹å€¼ã€æ ‡é¢˜
- **è¾“å‡º**: åŒ…å«2ä¸ªå­å›¾çš„figureå¯¹è±¡
  - å·¦å›¾: æ®‹å·®vsé¢„æµ‹å€¼ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰æ¨¡å¼ï¼‰
  - å³å›¾: æ®‹å·®ç›´æ–¹å›¾ï¼ˆæ£€æŸ¥æ­£æ€æ€§ï¼‰
- **ç”¨é€”**: è¯Šæ–­æ¨¡å‹é—®é¢˜
  - æ®‹å·®éšæœºåˆ†å¸ƒ â†’ æ¨¡å‹è‰¯å¥½
  - æ®‹å·®æœ‰è§„å¾‹ â†’ æ¨¡å‹æ¬ æ‹Ÿåˆæˆ–è¿‡æ‹Ÿåˆ
- **ç¤ºä¾‹**:
  ```python
  fig = plot_residuals(y_true, y_pred, 'Gompertz Model Residuals')
  plt.show()
  ```

##### D. æ•°æ®è½¬æ¢

**`concentration_unit_converter(value, from_unit='mg/L', to_unit='mmol/L', molecular_weight=112.41)`**
- **ä½œç”¨**: é•‰ç¦»å­æµ“åº¦å•ä½è½¬æ¢
- **è¾“å…¥**: 
  - `value`: æµ“åº¦å€¼
  - `from_unit`: åŸå§‹å•ä½ï¼ˆ'mg/L', 'mmol/L', 'g/L'ï¼‰
  - `to_unit`: ç›®æ ‡å•ä½
  - `molecular_weight`: åˆ†å­é‡ï¼ˆCdÂ²âº = 112.41 g/molï¼‰
- **ç®—æ³•**:
  - mg/L â†’ mmol/L: value / molecular_weight
  - mmol/L â†’ mg/L: value Ã— molecular_weight
- **ç¤ºä¾‹**:
  ```python
  cd_mmol = concentration_unit_converter(9.0, 'mg/L', 'mmol/L')
  # 0.0800 mmol/L
  ```

##### E. æ¨¡å‹è¯Šæ–­

**`residual_analysis(y_true, y_pred)`**
- **ä½œç”¨**: æ®‹å·®ç»Ÿè®¡åˆ†æ
- **è¾“å…¥**: çœŸå®å€¼å’Œé¢„æµ‹å€¼æ•°ç»„
- **è¾“å‡º**: å­—å…¸ï¼ŒåŒ…å«
  - `residuals`: æ®‹å·®æ•°ç»„
  - `mean_residual`: å¹³å‡æ®‹å·®ï¼ˆåº”æ¥è¿‘0ï¼‰
  - `std_residual`: æ®‹å·®æ ‡å‡†å·®
  - `normal_test_p`: Shapiro-Wilkæ­£æ€æ€§æ£€éªŒpå€¼
  - `is_normal`: æ®‹å·®æ˜¯å¦æ­£æ€åˆ†å¸ƒï¼ˆp>0.05ï¼‰
- **ç”¨é€”**: æ£€éªŒæ¨¡å‹å‡è®¾æ˜¯å¦æ»¡è¶³
- **ç¤ºä¾‹**:
  ```python
  res = residual_analysis(y_true, y_pred)
  if res['is_normal']:
      print("æ®‹å·®æ­£æ€åˆ†å¸ƒï¼Œæ¨¡å‹å‡è®¾æ»¡è¶³")
  ```

##### F. æ ¼å¼åŒ–è¾“å‡º

**`print_section(title, width=70)`**
- **ä½œç”¨**: æ‰“å°é†’ç›®çš„ç« èŠ‚æ ‡é¢˜
- **æ•ˆæœ**: 
  ```
  ======================================================================
                              æ¨¡å— 3.1ï¼šå»ºæ¨¡
  ======================================================================
  ```

**`print_subsection(title, width=70)`**
- **ä½œç”¨**: æ‰“å°å°èŠ‚æ ‡é¢˜
- **æ•ˆæœ**:
  ```
  ç¬¬ä¸€éƒ¨åˆ†ï¼šç”Ÿé•¿æ›²çº¿å»ºæ¨¡
  ----------------------------------------------------------------------
  ```

**`print_dict(data_dict, title=None)`**
- **ä½œç”¨**: æ ¼å¼åŒ–æ‰“å°å­—å…¸å†…å®¹
- **æ•ˆæœ**:
  ```
  Hillæ–¹ç¨‹å‚æ•°:
    F_max: 260.0000
    EC50: 1.2350
    n: 2.4500
  ```

#### ä½¿ç”¨åœºæ™¯

**åœºæ™¯1**: å¿«é€ŸåŠ è½½æ•°æ®å¹¶è®¡ç®—ç»Ÿè®¡é‡
```python
from utils import *

df = load_data('module_3.1_growth_curves.csv')
stats = calculate_statistics(df['OD600_0mg_L'])
print_dict(stats, "0 mg/Lç»„ç»Ÿè®¡")
```

**åœºæ™¯2**: è¯„ä¼°æ¨¡å‹æ€§èƒ½
```python
from utils import *

# æ‹Ÿåˆæ¨¡å‹
y_pred = my_model(x_data, *params)

# è¯„ä¼°
metrics = calculate_model_metrics(y_data, y_pred, 'My Model')
print_dict(metrics)

# è¯Šæ–­
residuals = residual_analysis(y_data, y_pred)
if not residuals['is_normal']:
    print("è­¦å‘Š: æ®‹å·®ä¸æ»¡è¶³æ­£æ€åˆ†å¸ƒ")
```

**åœºæ™¯3**: ç”Ÿæˆä¸“ä¸šå›¾è¡¨
```python
from utils import *

set_plot_style('scientific')
fig, ax = plt.subplots(figsize=(10, 6))
ax.plot(x, y, 'o-')
ax.set_xlabel('Time (h)')
ax.set_ylabel('ODâ‚†â‚€â‚€')
save_figure(fig, '01_growth_curve.png', dpi=600)
```

---

### 2. `code/01_data_extraction.py` - æ•°æ®æå–è„šæœ¬

**æ–‡ä»¶ç±»å‹**: æ•°æ®é¢„å¤„ç†è„šæœ¬  
**è¡Œæ•°**: ~450è¡Œ  
**è¿è¡Œæ—¶é—´**: ~5ç§’  
**è¾“å‡º**: 7ä¸ªCSV + 1å¼ å›¾ + 1ä»½æŠ¥å‘Š

#### åŠŸèƒ½æ¦‚è¿°

è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„**èµ·ç‚¹**ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†SCU-China Wikié¡µé¢ä¸Šçš„å›¾è¡¨æ•°æ®è½¬æ¢æˆè®¡ç®—æœºå¯è¯»çš„CSVæ ¼å¼ï¼Œä¸ºåç»­å»ºæ¨¡æä¾›æ ‡å‡†åŒ–è¾“å…¥ã€‚

#### æ ¸å¿ƒåŠŸèƒ½

##### A. æ•°æ®æå–

**æå–çš„æ•°æ®æº**:
1. **Fig 3.1-4**: ä¸åŒCdÂ²âºæµ“åº¦ä¸‹çš„ç”Ÿé•¿æ›²çº¿ï¼ˆ5æ¡æ›²çº¿ï¼‰
2. **Fig 3.1-5**: è§å…‰å¼ºåº¦éšæ—¶é—´å’Œæµ“åº¦å˜åŒ–ï¼ˆ3æ¡æ›²çº¿ï¼‰
3. **Fig 3.2-4**: ç”Ÿç‰©è†œå½¢æˆçš„OD570å€¼ï¼ˆ4ä¸ªæµ“åº¦ç‚¹ï¼‰
4. **Fig 3.2-5**: å¸é™„-è§£å¸å¾ªç¯æ•°æ®ï¼ˆ9mg/Lå’Œ5mg/Lä¸¤ç»„ï¼‰
5. **Fig 3.4-1**: å¸é™„æ•ˆç‡éªŒè¯æ•°æ®ï¼ˆ2ç»„å¯¹æ¯”ï¼‰

**æ•°æ®æ ¼å¼**:

æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨Pythonå­—å…¸ä¸­ï¼Œç„¶åè½¬æ¢ä¸ºpandas DataFrameï¼š

```python
growth_curve_data = {
    'time_h': [0, 2, 4, 6, ...],  # æ—¶é—´ç‚¹
    'OD600_0mg_L': [0.05, 0.08, ...],  # 0 mg/Lç»„çš„OD600å€¼
    'OD600_0.25mg_L': [0.05, 0.08, ...],  # 0.25 mg/Lç»„
    # ... å…¶ä»–æµ“åº¦ç»„
}
df = pd.DataFrame(growth_curve_data)
```

##### B. æ•°æ®éªŒè¯

è„šæœ¬ä¼šè¾“å‡ºæ•°æ®ç»Ÿè®¡ä¿¡æ¯ï¼š
```python
âœ“ ç”Ÿé•¿æ›²çº¿æ•°æ®: 11 ä¸ªæ—¶é—´ç‚¹, 5 ä¸ªæµ“åº¦ç»„
âœ“ è§å…‰å¼ºåº¦æ•°æ®: 7 ä¸ªæ—¶é—´ç‚¹, 3 ä¸ªæµ“åº¦ç»„
```

##### C. æ•°æ®å¯è§†åŒ–

ç”Ÿæˆ `00_data_overview.png`ï¼ŒåŒ…å«6ä¸ªå­å›¾ï¼š
1. ç”Ÿé•¿æ›²çº¿æ€»è§ˆï¼ˆ5æ¡çº¿ï¼‰
2. è§å…‰å“åº”æ€»è§ˆï¼ˆ3æ¡çº¿ï¼‰
3. ç”Ÿç‰©è†œå½¢æˆï¼ˆè¯¯å·®æ£’ï¼‰
4. 9 mg/Lå¸é™„-è§£å¸å¾ªç¯
5. 5 mg/Lå¸é™„-è§£å¸å¾ªç¯
6. å¸é™„æ•ˆç‡éªŒè¯ï¼ˆæŸ±çŠ¶å›¾ï¼‰

**å›¾è¡¨ç‰¹ç‚¹**:
- é«˜åˆ†è¾¨ç‡ï¼ˆ300 dpiï¼‰
- ä¸­æ–‡æ ‡ç­¾ï¼ˆè‡ªåŠ¨è¯†åˆ«æ“ä½œç³»ç»Ÿé€‰æ‹©å­—ä½“ï¼‰
- é¢œè‰²ç¼–ç æ¸…æ™°
- æ•°å€¼æ ‡æ³¨

##### D. æŠ¥å‘Šç”Ÿæˆ

ç”Ÿæˆ `data_extraction_report.txt`ï¼Œå†…å®¹åŒ…æ‹¬ï¼š
- æå–çš„æ•°æ®æ–‡ä»¶åˆ—è¡¨
- æ•°æ®æ±‡æ€»è¡¨
- é‡è¦æç¤ºï¼ˆå¦‚ä½•æ›¿æ¢çœŸå®æ•°æ®ï¼‰
- ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å¼•

#### è¾“å…¥ä¸è¾“å‡º

**è¾“å…¥**: æ— ï¼ˆæ•°æ®ç¡¬ç¼–ç åœ¨è„šæœ¬ä¸­ï¼‰

**è¾“å‡º**:
```
data/raw/
â”œâ”€â”€ module_3.1_growth_curves.csv           # 11è¡ŒÃ—6åˆ—
â”œâ”€â”€ module_3.1_fluorescence.csv            # 7è¡ŒÃ—4åˆ—
â”œâ”€â”€ module_3.2_biofilm.csv                 # 4è¡ŒÃ—3åˆ—
â”œâ”€â”€ module_3.2_adsorption_9mg.csv          # 6è¡ŒÃ—6åˆ—
â”œâ”€â”€ module_3.2_adsorption_5mg.csv          # 6è¡ŒÃ—6åˆ—
â”œâ”€â”€ module_3.3_experimental_conditions.csv # 1è¡ŒÃ—7åˆ—
â””â”€â”€ module_3.4_verification.csv            # 2è¡ŒÃ—6åˆ—

figures/
â””â”€â”€ 00_data_overview.png                   # ç»„åˆå›¾

results/
â””â”€â”€ data_extraction_report.txt             # æ–‡æœ¬æŠ¥å‘Š
```

#### å¦‚ä½•ä¿®æ”¹æ•°æ®

**æ­¥éª¤1**: ä½¿ç”¨WebPlotDigitizeræå–çœŸå®æ•°æ®

**æ­¥éª¤2**: æ‰“å¼€ `01_data_extraction.py`

**æ­¥éª¤3**: æ‰¾åˆ°å¯¹åº”çš„æ•°æ®æ•°ç»„ï¼ˆä¾‹å¦‚ï¼Œä¿®æ”¹ç”Ÿé•¿æ›²çº¿ï¼‰ï¼š

```python
# ç¬¬48è¡Œå·¦å³
growth_curve_data = {
    'time_h': [0, 2, 4, 6, 8, 10, ...],  # â† æ›¿æ¢ä¸ºä½ æå–çš„Xå€¼
    'OD600_0mg_L': [0.05, 0.08, 0.15, ...],  # â† æ›¿æ¢ä¸ºä½ æå–çš„Yå€¼
    ...
}
```

**æ­¥éª¤4**: ä¿å­˜å¹¶é‡æ–°è¿è¡Œ

```bash
python code/01_data_extraction.py
```

#### å…³é”®ä»£ç ç‰‡æ®µ

**æ•°æ®æå–ä¸ä¿å­˜**:
```python
# å®šä¹‰æ•°æ®
growth_curve_data = {...}
df_growth = pd.DataFrame(growth_curve_data)

# ä¿å­˜CSV
df_growth.to_csv('data/raw/module_3.1_growth_curves.csv', index=False)
```

**æ•°æ®å¯è§†åŒ–**:
```python
fig = plt.figure(figsize=(16, 10))
gs = fig.add_gridspec(3, 3, hspace=0.3, wspace=0.3)

# å­å›¾1: ç”Ÿé•¿æ›²çº¿
ax1 = fig.add_subplot(gs[0, :2])
for col in df_growth.columns[1:]:
    ax1.plot(df_growth['time_h'], df_growth[col], marker='o', label=col)
# ...

plt.savefig('figures/00_data_overview.png', dpi=300)
```

#### å¸¸è§é—®é¢˜

**Q1**: æ•°æ®ç‚¹æ•°é‡ä¸åŒ¹é…æ€ä¹ˆåŠï¼Ÿ  
**A**: ç¡®ä¿æ¯åˆ—çš„é•¿åº¦ç›¸åŒã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `time_h` æœ‰11ä¸ªç‚¹ï¼Œæ‰€æœ‰ `OD600_*` åˆ—ä¹Ÿå¿…é¡»æœ‰11ä¸ªç‚¹ã€‚

**Q2**: å¦‚ä½•æ·»åŠ æ–°çš„æµ“åº¦ç»„ï¼Ÿ  
**A**: åœ¨å­—å…¸ä¸­æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼š
```python
'OD600_2mg_L': [0.04, 0.06, 0.09, ...]
```

**Q3**: å›¾è¡¨ä¸­çš„ä¸­æ–‡æ˜¾ç¤ºä¸ºæ–¹æ¡†ï¼Ÿ  
**A**: æ£€æŸ¥ç¬¬24-30è¡Œçš„å­—ä½“è®¾ç½®ï¼Œç¡®ä¿ç³»ç»Ÿæœ‰å¯¹åº”å­—ä½“ã€‚

---

### 3. `code/02_module_3.1.py` - æ„Ÿåº”æ¨¡å—å»ºæ¨¡

**æ–‡ä»¶ç±»å‹**: å»ºæ¨¡è„šæœ¬  
**è¡Œæ•°**: ~280è¡Œ  
**è¿è¡Œæ—¶é—´**: ~10ç§’  
**è¾“å‡º**: 2å¼ å›¾ + 3ä¸ªCSV + 1ä»½æŠ¥å‘Š

#### åŠŸèƒ½æ¦‚è¿°

å»ºç«‹**ç”Ÿé•¿åŠ¨åŠ›å­¦æ¨¡å‹**å’Œ**è§å…‰å“åº”æ¨¡å‹**ï¼Œé‡åŒ–å·¥ç¨‹èŒå¯¹é•‰ç¦»å­çš„ç”Ÿé•¿å“åº”å’Œä¼ æ„Ÿå™¨æ€§èƒ½ã€‚

#### æ ¸å¿ƒç®—æ³•

##### A. Modified Gompertzæ¨¡å‹

**æ•°å­¦å…¬å¼**:
```
OD(t) = A Ã— exp(-exp(Î¼_max Ã— e / A Ã— (lag - t) + 1))
```

**å‚æ•°å«ä¹‰**:
- **A**: æœ€å¤§ODå€¼ï¼ˆæ¸è¿‘çº¿ï¼‰ï¼Œè¡¨ç¤ºèŒæ ªèƒ½è¾¾åˆ°çš„æœ€é«˜ç»†èƒå¯†åº¦
- **Î¼_max**: æœ€å¤§æ¯”ç”Ÿé•¿é€Ÿç‡ï¼ˆhâ»Â¹ï¼‰ï¼Œæ–œç‡æœ€å¤§ç‚¹çš„åˆ‡çº¿æ–œç‡
- **lag**: æ»åæœŸï¼ˆhï¼‰ï¼ŒèŒæ ªé€‚åº”ç¯å¢ƒæ‰€éœ€çš„æ—¶é—´

**ç‰©ç†æ„ä¹‰**:
- Aè¶Šå¤§ â†’ èŒæ ªç”Ÿç‰©é‡è¶Šé«˜
- Î¼_maxè¶Šå¤§ â†’ ç”Ÿé•¿è¶Šå¿«
- lagè¶Šé•¿ â†’ é€‚åº”æœŸè¶Šé•¿

**æ‹Ÿåˆè¿‡ç¨‹**:
```python
from scipy.optimize import curve_fit

def gompertz_model(t, A, mu_max, lag):
    return A * np.exp(-np.exp(mu_max * np.e / A * (lag - t) + 1))

# åˆå§‹çŒœæµ‹å€¼
p0 = [1.5, 0.4, 5.0]  # [A, Î¼_max, lag]

# éçº¿æ€§æœ€å°äºŒä¹˜æ‹Ÿåˆ
popt, pcov = curve_fit(gompertz_model, t_data, od_data, p0=p0, maxfev=10000)
```

**åˆå§‹çŒœæµ‹å€¼è®¾ç½®**:
- `A`: è§‚å¯Ÿæ•°æ®çš„æœ€å¤§å€¼Ã—1.1
- `Î¼_max`: 0.3-0.5ï¼ˆå¾®ç”Ÿç‰©å…¸å‹å€¼ï¼‰
- `lag`: æ•°æ®èµ·å§‹ä¸Šå‡çš„æ—¶é—´ç‚¹

**æ‹Ÿåˆä¼˜åº¦è¯„ä¼°**:
```python
od_pred = gompertz_model(t_data, *popt)
R2 = r2_score(od_data, od_pred)  # åº”>0.95
RMSE = np.sqrt(mean_squared_error(od_data, od_pred))  # è¶Šå°è¶Šå¥½
```

##### B. Hillæ–¹ç¨‹

**æ•°å­¦å…¬å¼ï¼ˆå››å‚æ•°ï¼‰**:
```
F(C) = F_min + (F_max - F_min) Ã— C^n / (EC50^n + C^n)
```

**ç®€åŒ–ç‰ˆï¼ˆä¸‰å‚æ•°ï¼Œå‡è®¾F_min=0ï¼‰**:
```
F(C) = F_max Ã— C^n / (EC50^n + C^n)
```

**å‚æ•°å«ä¹‰**:
- **F_max**: æœ€å¤§è§å…‰å¼ºåº¦ï¼Œé¥±å’Œæ—¶çš„è§å…‰å€¼
- **EC50**: åŠæ•°æœ‰æ•ˆæµ“åº¦ï¼Œè¾¾åˆ°50%æœ€å¤§å“åº”æ—¶çš„CdÂ²âºæµ“åº¦
- **n**: Hillç³»æ•°ï¼ŒååŒæ€§æŒ‡æ ‡
  - n=1: æ— ååŒæ€§ï¼ˆç®€å•ç»“åˆï¼‰
  - n>1: æ­£ååŒæ€§ï¼ˆç»“åˆåæ›´å®¹æ˜“ç»“åˆï¼‰
  - n<1: è´ŸååŒæ€§ï¼ˆç»“åˆåæ›´éš¾ç»“åˆï¼‰

**æ‹Ÿåˆè¿‡ç¨‹**:
```python
def hill_equation_simple(x, F_max, EC50, n):
    return F_max * x**n / (EC50**n + x**n)

p0 = [max(fluorescence), 1.0, 2.0]  # [F_max, EC50, n]
popt, pcov = curve_fit(hill_equation_simple, concentrations, fluorescence, p0=p0)
```

**EC50çš„æ„ä¹‰**:
- EC50è¶Šå° â†’ ä¼ æ„Ÿå™¨è¶Šçµæ•ï¼ˆä½æµ“åº¦å°±èƒ½æ£€æµ‹åˆ°ï¼‰
- æ£€æµ‹èŒƒå›´çº¦ä¸º 0.1Ã—EC50 ~ 10Ã—EC50

#### æ‰§è¡Œæµç¨‹

**æ­¥éª¤1**: åŠ è½½æ•°æ®
```python
df_growth = load_data('module_3.1_growth_curves.csv')
df_fluo = load_data('module_3.1_fluorescence.csv')
```

**æ­¥éª¤2**: å¯¹æ¯ä¸ªCdÂ²âºæµ“åº¦ç»„æ‹ŸåˆGompertz
```python
for col in df_growth.columns[1:]:  # è·³è¿‡time_håˆ—
    # æå–æ•°æ®
    t_data = df_growth['time_h'].values
    od_data = df_growth[col].values
    
    # æ‹Ÿåˆ
    popt, pcov = curve_fit(gompertz_model, t_data, od_data, p0=[1.5, 0.4, 5.0])
    
    # ä¿å­˜å‚æ•°
    results.append({'Cd': cd_conc, 'A': popt[0], 'mu_max': popt[1], ...})
```

**æ­¥éª¤3**: æ‹ŸåˆHillæ–¹ç¨‹
```python
# ä½¿ç”¨25hæ—¶åˆ»çš„è§å…‰æ•°æ®ï¼ˆå³°å€¼ï¼‰
time_point = 25
idx = np.argmin(np.abs(df_fluo['time_h'] - time_point))
fluorescence = [df_fluo[col].iloc[idx] for col in df_fluo.columns[1:]]

# æ‹Ÿåˆ
popt_hill, _ = curve_fit(hill_equation_simple, concentrations, fluorescence, p0=[260, 1, 2])
```

**æ­¥éª¤4**: ç”Ÿæˆå›¾è¡¨
- 6ä¸ªå­å›¾çš„ç”Ÿé•¿æ›²çº¿æ‹Ÿåˆå›¾
- 1å¼ è§å…‰å‰‚é‡-å“åº”æ›²çº¿å›¾

**æ­¥éª¤5**: ä¿å­˜ç»“æœ
- CSV: Gompertzå‚æ•°è¡¨ã€Hillå‚æ•°
- TXT: æ¨¡å—æŠ¥å‘Š

#### è¾“å…¥ä¸è¾“å‡º

**è¾“å…¥**:
- `data/raw/module_3.1_growth_curves.csv`
- `data/raw/module_3.1_fluorescence.csv`

**è¾“å‡º**:
```
figures/
â”œâ”€â”€ 01_module_3.1_gompertz_fitting.png   # 6ä¸ªå­å›¾ï¼Œæ¯ä¸ªæµ“åº¦ç»„ä¸€ä¸ª
â””â”€â”€ 02_module_3.1_hill_dose_response.png # Hillæ‹Ÿåˆæ›²çº¿

results/
â”œâ”€â”€ module_3.1_gompertz_parameters.csv   # 5è¡ŒÃ—6åˆ—ï¼ˆæ¯ä¸ªæµ“åº¦ç»„çš„å‚æ•°ï¼‰
â”œâ”€â”€ module_3.1_hill_parameters.csv       # 1è¡ŒÃ—4åˆ—
â””â”€â”€ module_3.1_report.txt                # æ–‡æœ¬æŠ¥å‘Š
```

#### ç»“æœè§£è¯»

**Gompertzå‚æ•°è¡¨ç¤ºä¾‹**:
```
Cd_concentration_mg_L  A_max_OD  mu_max_h-1  lag_time_h     R2
                 0.00    1.4931      0.1616      3.7784 0.9959
                 0.25    1.4435      0.1547      3.8187 0.9956
                 0.50    1.3921      0.1499      3.9685 0.9955
                 1.00    1.2906      0.1365      3.9957 0.9951
                 1.50    1.1420      0.1169      4.1741 0.9942
```

**å…³é”®å‘ç°**:
- AéšCdÂ²âºæµ“åº¦å¢åŠ è€Œä¸‹é™ï¼ˆç”Ÿç‰©é‡å‡å°‘ï¼‰
- Î¼_maxä»0.162é™è‡³0.117 hâ»Â¹ï¼ˆä¸‹é™27.8%ï¼‰
- lagä»3.78å»¶é•¿è‡³4.17 hï¼ˆé€‚åº”æœŸå»¶é•¿ï¼‰
- RÂ²å‡>0.99ï¼ˆæ‹Ÿåˆä¼˜ç§€ï¼‰

**Hillå‚æ•°ç¤ºä¾‹**:
```
F_max: 260.00 FU
EC50: 1.235 mmol/L
Hill_coefficient_n: 2.450
R2: 0.9876
```

**å…³é”®å‘ç°**:
- EC50 = 1.235 mmol/L â‰ˆ 139 mg/Lï¼ˆä¼ æ„Ÿå™¨çµæ•åº¦ä¸­ç­‰ï¼‰
- n = 2.45 > 1ï¼ˆæ­£ååŒæ€§ï¼Œå“åº”é™¡å³­ï¼‰
- æ£€æµ‹èŒƒå›´çº¦ä¸º 0.12-12 mmol/L

#### å‚æ•°è°ƒæ•´æŒ‡å—

**Gompertzæ‹Ÿåˆä¸ä½³æ—¶**:
1. è°ƒæ•´åˆå§‹çŒœæµ‹å€¼ `p0`
   ```python
   p0 = [max(od_data)*1.1, 0.3, 3.0]  # æ›´æ¥è¿‘å®é™…å€¼
   ```
2. å¢åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°
   ```python
   curve_fit(..., maxfev=50000)
   ```
3. æ£€æŸ¥æ•°æ®è´¨é‡ï¼ˆæ˜¯å¦æœ‰å¼‚å¸¸ç‚¹ï¼‰

**Hillæ‹Ÿåˆå¤±è´¥æ—¶**:
- ä½¿ç”¨ä¸‰å‚æ•°æ¨¡å‹ï¼ˆå»æ‰F_minï¼‰
- ç¡®ä¿è‡³å°‘æœ‰4ä¸ªæ•°æ®ç‚¹
- è°ƒæ•´åˆå§‹çŒœæµ‹å€¼

#### å¸¸è§é—®é¢˜

**Q1**: ä¸ºä»€ä¹ˆåªç”¨25hçš„è§å…‰æ•°æ®æ‹ŸåˆHillæ–¹ç¨‹ï¼Ÿ  
**A**: å› ä¸º25hæ˜¯è§å…‰å“åº”çš„å³°å€¼æ—¶åˆ»ï¼Œæ­¤æ—¶ä¿¡å·æœ€å¼ºã€‚ä½¿ç”¨å³°å€¼æ•°æ®èƒ½æ›´å‡†ç¡®è¯„ä¼°ä¼ æ„Ÿå™¨çš„æœ€å¤§èƒ½åŠ›ã€‚

**Q2**: RÂ²ä»€ä¹ˆæ°´å¹³ç®—å¥½ï¼Ÿ  
**A**: 
- RÂ² > 0.95: ä¼˜ç§€
- 0.90 < RÂ² < 0.95: è‰¯å¥½
- RÂ² < 0.90: éœ€æ”¹è¿›ï¼ˆæ£€æŸ¥æ•°æ®æˆ–æ¨¡å‹ï¼‰

**Q3**: å¦‚ä½•é€‰æ‹©åˆå§‹çŒœæµ‹å€¼ï¼Ÿ  
**A**: 
- A: æ•°æ®æœ€å¤§å€¼Ã—1.1
- Î¼_max: 0.3-0.5ï¼ˆå¾®ç”Ÿç‰©å…¸å‹å€¼ï¼‰
- lag: ç›®æµ‹æ•°æ®èµ·å§‹ä¸Šå‡çš„æ—¶é—´ç‚¹

---

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘ç»§ç»­åœ¨ä¸‹ä¸€æ¡æ¶ˆæ¯ä¸­å®Œæˆå‰©ä½™æ–‡ä»¶çš„è¯¦ç»†è¯´æ˜ï¼ˆ03_module_3.2.py, 04_module_3.3_3.4.py, Jupyter Notebooksï¼‰ï¼Œä»¥åŠæ•°æ®æ›´æ–°æµç¨‹å’ŒJupyterä½¿ç”¨æ–¹æ³•çš„è¯¦ç»†è§£ç­”ã€‚

**ä½ éœ€è¦çš„ä¿®å¤è¡¥ä¸å·²ç»åœ¨ç¬¬ä¸€ä¸ªartifactä¸­ç»™å‡º**ï¼Œè¯·æŒ‰ç…§è¯´æ˜ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶å³å¯è§£å†³æŠ¥é”™é—®é¢˜ï¼